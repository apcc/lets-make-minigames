# 1.5 ファイル分割
ファイルを分割すると何が嬉しいかと言うと、
- コンパイルが速くなる(ことがある)
- 目的のソースを見つけやすくなる
- (Gitを使用する場合は特に)ファイルの変更が一部だけの影響で済む

などである。
ファイルの分割は次のルールで行うとよい。
- 1クラス1ファイル対
  - ここでファイル対というのはcppファイルとhppファイルのペアのこと
- ファイル名はクラス名を小文字に直したもの

## 1.5.1 cppファイルとhppファイルの使い分け
### hppファイル
hppファイルはincludeをするのに使われるので、classにどのようなメンバがあるか、宣言に留める。

```cpp
#pragma once // hppが2回includeされるとエラーが出てしまうのでそれを防ぐ。先頭に書くこと
class TestClass {
private:
  int a;
public:
  TestClass(int b);
  int get_a();
  void set_a(int b);
};
```
このように、関数の表面だけを書いておく。

### cppファイル
一方cppファイルはclassの挙動を記述する。hppで宣言したメソッドの定義をここに書く。

```
#include "testclass.hpp" //hppファイルを読み込まないとclassが存在してると知られない

TestClass::TestClass(int b) // TestClass を名前空間のように扱う
  :a(b)
  {}

int TestClass::get_a() { // 返り値の型を書くこと
  return a; // ここはクラスの中なのでprivateでも操作可
}

void TestClass::set_a(int b) {
  a=b;
}
```

### 1.5.1.a 補足:宣言と定義
関数をつくるのにこの例の場合宣言と定義の2パートで行っている。
宣言: 関数が *ある* ことを(コンパイラに)伝える。引数などの情報などでよく、関数の中身は必要ない
定義: 関数がどのような処理をするかを伝える。

呼び出しは宣言の情報だけでよく、定義が書かれていないとコンパイルするときにエラーが発生する。

## 1.5.b コラム:なぜコンパイルが早くなるの?
コンパイラはファイルごとに機械語にコンパイルを行っており、ここにとても時間がかかる。
このあと、それぞれのファイルをつなぎ合わせて実行可能なファイルに変換するリンクという作業を行う。
1行だけ変更したときにファイル分割をしておくと再コンパイルが必要なのが1ファイルで済む。
このため、コンパイル時間短縮につながる。
